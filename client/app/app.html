<svg version="1.1" xmlns="http://www.w3.org/2000/svg" style="display:none;">
  <filter id="blur">
    <fegaussianblur stddeviation="10"></fegaussianblur>
  </filter>
</svg>

<div flex="" layout="column" layout-fill="">
  <title-bar title="Virtual Tour" [mobile]="$ctrl.mobile" flex="nogrow">
    <title-bar-button
      ng-repeat="option in $ctrl.titlebar"
      (click)="$ctrl.buttonClicked($event, option)"
      [class]="::option.class"
      [label]="::option.label"
      [active]="option.active"
      [icon]="option.icon"
      [tooltip]="option.tooltip"
      [id]="option.id">
    </title-bar-button>
  </title-bar>

  <div layout="column"
  		 layout-gt-sm="row"
  		 layout-align="end stretch"
  		 layout-align-gt-sm="end start"
  		 flex
  		 class="scene-container"
  		 ng-class="{ 'toolbar-open' : $ctrl.toolbar.open && !$ctrl.mobile.landscape, 'toolbar-condensed': $ctrl.toolbar.condensed }">
    <section id="scene-view"
				     flex="grow"
				     layout="column"
				     layout-fill=""
				     ng-class="{ 'blur-active' : $ctrl.toolbar.hasBlur }"
				     class="scene-view">
      <aframe-scene mobile="$ctrl.mobile">
      	<ng-transclude></ng-transclude>
      </aframe-scene>
    </section>

    <button-bar layout="row"
    						layout-gt-sm="column"
    						flex="nogrow"
    						[items]="$ctrl.toolbar.views"
    						[open]="$ctrl.toolbar.open"
    						[condensed]="$ctrl.toolbar.condensed"
    						[mobile]="$ctrl.mobile"
    						(select)="$ctrl.toolbar.onSelect($event)">
    </button-bar>
  </div>
</div>

<div ng-class="{ 'toolbar-open' : ($ctrl.toolbar.open && !landscapeMobile), 'toolbar-condensed': $ctrl.toolbar.condensed }" layout="row" flex="">
  <md-sidenav ng-class="{ 'blur-active' : $ctrl.toolbar.hasBlur, 'is-mobile': $ctrl.mobile.screen, 'is-landscape': $ctrl.mobile.landscape }" md-component-id="right" md-disable-backdrop="" md-whiteframe="4" flex="" class="md-sidenav-right main-menu" ng-switch on="$ctrl.toolbar.currentView">
    <drilldown-menu ng-switch-when="locations" [children]="$ctrl.drilldown.structure"></drilldown-menu>
    <uoit-map ng-switch-when="map"></uoit-map>
    <search-menu ng-switch-when="search"></search-menu>
    <user-settings ng-switch-when="settings"></user-settings>
  </md-sidenav>
</div>
<ui-view />