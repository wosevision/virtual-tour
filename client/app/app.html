<svg version="1.1" xmlns="http://www.w3.org/2000/svg" style="display:none;">
  <filter id="blur">
    <fegaussianblur stddeviation="10"></fegaussianblur>
  </filter>
</svg>

<div flex="" layout="column" layout-fill="">
  <title-bar title="Virtual Tour" mobile="mc.mobile" flex="nogrow">
    <title-bar-button ng-repeat="option in mc.titlebar" on-click="option.onClick()" label="{{ ::option.label }}" active="option.active" icon="option.icon" tooltip="option.tooltip" class="{{ ::option.class }}" id="titlebar-btn-{{::id}}">
    </title-bar-button>
  </title-bar>

  <div layout="column"
  		 layout-gt-sm="row"
  		 layout-align="end stretch"
  		 layout-align-gt-sm="end start"
  		 flex
  		 class="scene-container"
  		 ng-class="{ 'toolbar-open' : mc.toolbar.open && !mc.mobile.landscape, 'toolbar-condensed': mc.toolbar.condensed }">
    <section id="scene-view"
				     flex="grow"
				     layout="column"
				     layout-fill=""
				     ng-class="{ 'blur-active' : mc.toolbar.hasBlur }"
				     class="scene-view">
      <aframe-scene mobile="mc.mobile">
      	<ng-transclude></ng-transclude>
      </aframe-scene>
    </section>

    <button-bar layout="row"
    						layout-gt-sm="column"
    						flex="nogrow"
    						items="mc.toolbar.views"
    						open="mc.toolbar.open"
    						condensed="mc.toolbar.condensed"
    						mobile="mc.mobile"
    						on-select="mc.toolbar.onSelect($event)">
    </button-bar>
  </div>
</div>

<div ng-class="{ 'toolbar-open' : (mc.toolbar.open && !landscapeMobile), 'toolbar-condensed': mc.toolbar.condensed }" layout="row" flex="">
  <md-sidenav ng-class="{ 'blur-active' : mc.toolbar.hasBlur, 'is-mobile': mc.mobile.screen, 'is-landscape': mc.mobile.landscape }" md-component-id="right" md-disable-backdrop="" md-whiteframe="4" flex="" class="md-sidenav-right main-menu" ng-switch on="mc.toolbar.currentView">
    <drilldown-menu ng-switch-when="locations" children="mc.drilldown.structure"></drilldown-menu>
    <uoit-map ng-switch-when="map"></uoit-map>
    <search-menu ng-switch-when="search"></search-menu>
    <user-settings ng-switch-when="settings"></user-settings>
  </md-sidenav>
</div>
<ui-view />