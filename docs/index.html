<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl">
  <title data-ice="title">UOIT Virtual Tour API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/wosevision/virtualtour.git" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-AppConfig">AppConfig</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-AppRun">AppRun</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-componentModule">componentModule</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">aframe/editor</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/components/aframe/editor/editor_controller.js~EditorCtrl.html">EditorCtrl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/components/aframe/editor/editor_service.js~$aframeEditor.html">$aframeEditor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-sceneEditor">sceneEditor</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">aframe/scene</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/components/aframe/scene/scene_controller.js~SceneCtrl.html">SceneCtrl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/components/aframe/scene/scene_service.js~$aframeScene.html">$aframeScene</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-aframeScene">aframeScene</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><div data-ice="index" class="github-markdown"><h1 id="uoit-virtual-tour">UOIT Virtual Tour</h1>
<p><strong><em>Version 0.0.1</em></strong></p>
<p>Welcome to the Github repository of the <strong>UOIT Virtual Tour web application</strong>, powered by the <a href="https://en.wikipedia.org/wiki/MEAN_(software_bundle">MEAN</a>) software stack! This is (only) the front-end component of the application; the server that powers the tour is currently hosted in a <a href="https://github.com/wosevision/virtualtour-server">separate repository</a>. The Virtual Tour&apos;s complete documentation will be featured in this repository, with each folder containing docs for its respective contents.</p>
<h2 id="table-of-contents">Table of contents</h2>
<h3 id="quick-start">Quick start</h3>
<ol>
<li><a href="#getting-up-and-running">Getting up and running</a></li>
<li><a href="#libraries">Libraries</a></li>
<li><a href="#blog-resources">Blog resources</a></li>
</ol>
<h3 id="application">Application</h3>
<ol>
<li><a href="#angularjs">AngularJS</a> &#x2013; M-V-* framework<ul>
<li><a href="#naming-convention">Naming convention</a></li>
<li><a href="#module-organization">Module organization</a></li>
<li><a href="#dependency-injection">Dependency injection</a></li>
<li><a href="#angular-material">Angular Material</a> &#x2013; UI library based on Material Design</li>
</ul>
</li>
<li><a href="#a-frame">A-Frame</a> &#x2013; Web VR building blocks<ul>
<li><a href="#angular-integration">Angular integration</a></li>
</ul>
</li>
<li><a href="#google-maps">Google Maps</a></li>
</ol>
<h3 id="build-process">Build process</h3>
<ol>
<li><a href="#sass">Sass</a> &#x2013; CSS compiler<ul>
<li><a href="#stylesheet-organization">Stylesheet organization</a></li>
</ul>
</li>
<li><a href="#browserify">Browserify</a> &#x2013; Module requirer/bundler</li>
<li><a href="#babel">Babel</a> &#x2013; ES6-to-boring-JS transpiler</li>
<li><a href="#gulp">Gulp</a> &#x2013; Build system<ul>
<li><a href="#web-server">Web Server</a></li>
<li><a href="#scripts">Scripts</a></li>
<li><a href="#styles">Styles</a></li>
<li><a href="#images">Images</a></li>
<li><a href="#views">Views</a></li>
<li><a href="#watching-files">Watching files</a></li>
<li><a href="#production">Production</a></li>
<li><a href="#compression">Compression</a></li>
<li><a href="#tests">Tests</a></li>
</ul>
</li>
<li><a href="#testing-still-heavily-under-development">Testing</a><ul>
<li><a href="#end-to-end-e2e-tests">End-to-End (e2e) tests</a></li>
<li><a href="#unit-tests">Unit tests</a></li>
</ul>
</li>
</ol>
<p>Also <del>utilizes <a href="https://github.com/toddmotto/angular-styleguide/tree/angular-old-es5">these best AngularJS practices</a></del> (<strong>NOW DEPRECATED</strong>: architecture update to <a href="https://github.com/toddmotto/angular-styleguide">this style</a> in progress) and Gulp best practices from <a href="https://github.com/greypants/gulp-starter">this resource</a>.</p>
<p><a href="https://github.com/jakemmarsh/angularjs-gulp-browserify-boilerplate/">View original boilerplate</a></p>
<hr>
<h3 id="getting-up-and-running">Getting up and running</h3>
<ol>
<li>Clone this repo from <code>https://github.com/wosevision/virtualtour.git</code><ul>
<li><em><strong>NOTE:</strong> Server files will need to be added separately; more details in <a href="https://github.com/wosevision/virtualtour-server">server repository</a></em></li>
</ul>
</li>
<li>Run <code>npm install</code> from the root directory</li>
<li>Run <code>gulp dev</code> (may require installing Gulp globally <code>npm install gulp -g</code>)</li>
<li>Your browser will automatically be opened and directed to the browser-sync proxy address<ul>
<li><em><strong>NOTE:</strong> The browser-sync server is loaded in tandem with a <a href="http://nodemon.io/">nodemon</a> process with the <code>dev</code> flag, which provides the API/routing express server; <strong>often, the timing between booting the two processes is less than ideal on first load and causes the page to hang</strong>. This fixes itself after a page refresh for the rest of the Gulp process and does not occur in <code>prod</code></em></li>
</ul>
</li>
<li>To prepare assets for production, run the <code>gulp prod</code> task (Note: the production task does not fire up the express server, and won&apos;t provide you with browser-sync&apos;s live reloading. Simply use <code>gulp dev</code> during development. More information below)</li>
</ol>
<p>Now that <code>gulp dev</code> is running, the server is up as well and serving files from the <code>/build</code> directory. Any changes in the <code>/app</code> directory will be automatically processed by Gulp and the changes will be injected to any open browsers pointed at the proxy address.</p>
<h4 id="libraries">Libraries</h4>
<p>This application uses the latest versions of Angular and A-Frame as its cornerstones, but is supported by a wide range of additional Angular modules and Gulp libraries (these can be seen in either <code>package.json</code>, or at the top of each task in <code>/gulp/tasks</code>). Any documentation specific to those libraries should be sought from the library&apos;s official docs, and will only be included in these docs if special details exist.</p>
<h4 id="blog-resources">Blog resources</h4>
<p>The following blogs are indispensable resources containing programming techniques and philosophies used in this project:</p>
<ul>
<li><a href="http://www.bennadel.com/">Ben Nadel</a>: advanced Angular techniques</li>
<li><a href="http://www.2ality.com/">Dr. Axel Rauschmayer</a>: ES6 techniques and best practices</li>
</ul>
<hr>
<h3 id="-angularjs-http-angularjs-org-"><a href="http://angularjs.org/">AngularJS</a></h3>
<p>AngularJS is a M-V-* (Model-View-Whatever) Javascript Framework for creating single-page web applications. In this project, it is used for all the application routing as well as all of the frontend views and logic.</p>
<p>The AngularJS files are all located within <code>/app</code>, structured in the following manner:</p>
<pre><code><code class="source-code prettyprint">.
&#x251C;&#x2500;&#x2500; components
&#x2502;   &#x251C;&#x2500;&#x2500; component
&#x2502;   &#x2502;   &#x251C;&#x2500;&#x2500; example_directive.js
&#x2502;   &#x2502;   &#x251C;&#x2500;&#x2500; example-part_factory.js
&#x2502;   &#x2502;   &#x251C;&#x2500;&#x2500; example_service.js
&#x2502;   &#x2502;   &#x251C;&#x2500;&#x2500; example_filter.js
&#x2502;   &#x2502;   &#x2514;&#x2500;&#x2500; childcomponent
&#x2502;   &#x2502;       &#x251C;&#x2500;&#x2500; example_directive.js
&#x2502;   &#x2502;       &#x251C;&#x2500;&#x2500; example-part_factory.js
&#x2502;   &#x2502;       &#x251C;&#x2500;&#x2500; example_service.js
&#x2502;   &#x2502;       &#x2514;&#x2500;&#x2500; example_filter.js
&#x2502;   &#x251C;&#x2500;&#x2500; app_config.js 
&#x2502;   &#x251C;&#x2500;&#x2500; app_run.js
&#x2502;   &#x251C;&#x2500;&#x2500; app_templates.js
&#x2502;   &#x251C;&#x2500;&#x2500; index.js
&#x2514;&#x2500;&#x2500; main.js</code>
</code></pre><p>Each folder in the <code>/app/components</code> directory represents a component and its child components. These folders contain all the files neccessary to power that component, including templates and Sass files.</p>
<h5 id="naming-convention">Naming convention</h5>
<p>Component pieces follow the naming convention <strong><code>component</code></strong><code>-</code><strong><code>part</code>**</strong><code>_</code><strong>**<code>type</code></strong><code>.js</code>. This guides the &apos;main&apos; component <code>index.js</code> on how to properly declare the modules.</p>
<h5 id="module-organization">Module organization</h5>
<p>Controllers, services, directives, etc. should all be placed within their respective component folders, and will be automatically required and mounted via the main <code>index.js</code> using <code>bulk-require</code>. All modules must export an object of the format:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const ExampleModule = function() {};

export default {
  name: &apos;ExampleModule&apos;,
  fn: ExampleModule
};</code>
</code></pre>
<h5 id="dependency-injection">Dependency injection</h5>
<p>Dependency injection is carried out with the <code>ng-annotate</code> library. In order to take advantage of this, a simple directive prologue of the format:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">function MyService($http) {
  &apos;ngInject&apos;;
  ...
}</code>
</code></pre>
<p>needs to be added at the very beginning of any Angular functions/modules. The Gulp tasks will then take care of adding any dependency injection, requiring you to only specify the dependencies within the function parameters and nothing more.</p>
<h5 id="-angular-material-https-material-angularjs-org-latest-"><a href="https://material.angularjs.org/latest/">Angular Material</a></h5>
<p>Angular Material is both a UI Component framework and a reference implementation of Google&apos;s <a href="https://material.google.com/">Material Design</a> specification. Though most Google-specific styles have been overridden with UOIT branding, the core UI components provide the majority of user interactions, layout directives, polyfilled browser features, and accessibility additions.</p>
<hr>
<h3 id="-a-frame-https-aframe-io-"><a href="https://aframe.io">A-Frame</a></h3>
<p>A-Frame is an open-source WebVR framework for creating virtual reality (VR) experiences with HTML. It is used to build VR scenes that work across smartphones, desktops, Oculus Rift, and consumer headsets like HTC Vive and Samsung Gear.</p>
<h5 id="angular-integration">Angular integration</h5>
<p>This project contains some custom Angular directives for use with A-Frame, which include:</p>
<ul>
<li><code>&lt;aframe-scene&gt;</code> &#x2013; proxies <code>&lt;a-scene&gt;</code> and provides a shared controller to all elements within the scene</li>
<li><code>&lt;aframe-entity&gt;</code> &#x2013; wraps the <code>&lt;a-entity&gt;</code> building block to provide Angular data-binding to entity attributes; also provides a base class that can be extended to write new A-Frame components (in line with their core philosophy)</li>
</ul>
<hr>
<h3 id="-google-maps-https-developers-google-com-maps-documentation-javascript-"><a href="https://developers.google.com/maps/documentation/javascript/">Google Maps</a></h3>
<p>The <strong>Google Maps V3 Javascript API</strong> provides the tour with cartographical navigation and geolocation features. It is wrapped in the <strong><a href="https://ngmap.github.io/">ng-map</a></strong> Angular directive for data-binding, and uses tour API data in the <a href="http://geojson.org/">GeoJSON</a> format.</p>
<hr>
<h3 id="-sass-http-sass-lang-com-"><a href="http://sass-lang.com/">Sass</a></h3>
<p>Sass is a CSS extension language adding things like extending, variables, and mixins to the language. This project provides a <code>/app/styles</code> folder which contains common Sass elements, such as mixins, variables, global styles, and libraries. Explicit imports into <code>/app/main.scss</code> bootstrap the styles as well as module-specific <code>.scss</code> files. A Gulp task (discussed later) is provided for compilation and minification of the stylesheets based on this file.</p>
<hr>
<h3 id="-browserify-http-browserify-org-"><a href="http://browserify.org/">Browserify</a></h3>
<p>Browserify is a Javascript file and module loader, allowing you to <code>require(&apos;modules&apos;)</code> in all of your files in the same manner as you would on the backend in a node.js environment. The bundling and compilation is then taken care of by Gulp, discussed below.</p>
<hr>
<h3 id="-babel-http-babeljs-io-"><a href="http://babeljs.io/">Babel</a></h3>
<p>This application&apos;s JavaScript is written in <em>ECMAScript 2015</em> and uses Babel during compilation. </p>
<p>Babel is an ES6-to-ES5 transpiler. <em>ECMAScript 2015</em> (or <strong>ES6</strong>/<strong>ES2015</strong>) is an ECMAScript standard that was ratified in June 2015. ES6 is a significant update to the JavaScript language, and the first major update to the language since ES5 was standardized in 2009. Implementation of these features in major JavaScript engines is underway now, but this project uses Babel to maintain support for pre-ES6 engines. The transpiling step is handled by Gulp, discussed below.</p>
<hr>
<h3 id="-gulp-http-gulpjs-com-"><a href="http://gulpjs.com/">Gulp</a></h3>
<p>Gulp is a Node-based &quot;streaming build system&quot;, which provides a very fast and efficient method for running build tasks.</p>
<p>A <code>/gulp</code> folder is included in the project, and contains a configuration file, some utilities, and a directory of <code>/gulp/tasks</code> inside containing single modules for various build processes.</p>
<pre><code><code class="source-code prettyprint">.
&#x251C;&#x2500;&#x2500; config.js
&#x251C;&#x2500;&#x2500; index.js
&#x251C;&#x2500;&#x2500; tasks
&#x2502;   &#x2514;&#x2500;&#x2500; ...example-task.js
&#x2514;&#x2500;&#x2500; util
    &#x251C;&#x2500;&#x2500; bundleLogger.js
    &#x251C;&#x2500;&#x2500; handleErrors.js
    &#x251C;&#x2500;&#x2500; scriptFilter.js
    &#x2514;&#x2500;&#x2500; testServer.js</code>
</code></pre><h5 id="web-server">Web Server</h5>
<p>Gulp is used here to provide an Express web server for viewing and testing the application as you build. It serves static files from the <code>/build</code> directory, and leaves app-level routing up to AngularJS. All Gulp tasks are configured to automatically reload the server upon file changes.</p>
<p>The application is served to <code>localhost:8080</code> after running the <code>gulp</code> (<code>dev</code> only) task. To take advantage of the fast live reload injection provided by browser-sync, you must load the site at the proxy address (which will be <code>localhost:4000</code> by default). To change the settings related to live-reload or browser-sync, you can access the UI at <code>localhost:3001</code>.</p>
<p>In a production environment, the Virtual Tour server and API replace the Gulp server.</p>
<h5 id="scripts">Scripts</h5>
<p>A number of build processes are automatically run on all of our JavaScript files, run in the following order:</p>
<ul>
<li><strong>ESLint:</strong> Gulp is currently configured to run an ESLint task before processing any Javascript files. This will show any errors in your code in the console, but will not prevent compilation or minification from occurring. You will be notified of parsing errors that prevent compilation.</li>
<li><strong>Browserify:</strong> The main build process run on any Javascript files. This processes any of the <code>require(&apos;module&apos;)</code> statements, compiling the files as necessary.</li>
<li><strong>Babelify:</strong> This transform uses <a href="#babel">Babel</a> to provide support for ES6+ features.</li>
<li><del><strong>Debowerify:</strong> Parses <code>require()</code> statements in your code, mapping them to <code>bower_components</code> when necessary. This allows you to use and include bower components just as you would npm modules.</del> <strong>Module removed due to lack of need for Bower</strong></li>
<li><strong>ngAnnotate:</strong> This will automatically add the correct dependency injection to any AngularJS files, as <a href="#dependency-injection">mentioned previously</a>.</li>
<li><strong>Uglifyify:</strong> Transform that uses UglifyJS to minify the file created by Browserify and ngAnnotate.</li>
</ul>
<p>The resulting file (<code>main.js</code>) is placed inside the directory <code>/build/js/</code>.</p>
<h5 id="styles">Styles</h5>
<p>Just one plugin is necessary for processing our SASS files, and that is <code>gulp-sass</code>. This will read the <code>main.scss</code> file, processing and importing any dependencies and then minifying the result. This file (<code>main.css</code>) is placed inside the directory <code>/build/css/</code>.</p>
<ul>
<li><strong>gulp-autoprefixer:</strong> Gulp is currently configured to run autoprefixer after compiling the scss.  Autoprefixer will use the data based on current browser popularity and property support to apply prefixes (<code>-moz-</code>, <code>-webkit-</code>) in the final outputted CSS.</li>
</ul>
<h5 id="images">Images</h5>
<p>Any images placed within <code>/app/images</code> will be automatically copied to the <code>build/images</code> directory. If running <code>gulp prod</code>, they will also be compressed via <strong>gulp-imagemin</strong>.</p>
<h5 id="views">Views</h5>
<p>When any changes are made to the <code>index.html</code> file, the new file is simply copied to the <code>/build</code> directory without any changes occurring.</p>
<p>Files inside <code>/app/components</code>, on the other hand, go through a slightly more complex process. The <code>gulp-angular-templatecache</code> module is used in order to process all views/partials, creating the <code>app_templates.js</code> file shown in the directory tree above. This file will contain all the views, now in Javascript format inside Angular&apos;s <code>$templateCache</code> service, making them all available to Angular by their full path (starting at/excluding <code>/app/components</code>). This will allow us to include them in our Javascript minification process, as well as avoid extra HTTP requests for our views.</p>
<h5 id="watching-files">Watching files</h5>
<p>All of the Gulp processes mentioned above are run automatically when any of the corresponding files in the <code>/app</code> directory are changed, and this is thanks to our Gulp watch tasks. Running <code>gulp dev</code> will begin watching all of these files, while also serving to <code>localhost:8080</code>, and with browser-sync proxy running at <code>localhost:4000</code> (by default).</p>
<h5 id="production">Production</h5>
<p>Just as there is the <code>gulp dev</code> task for development, there is also a <code>gulp prod</code> task for putting the Virtual Tour into a production-ready state. This will run each of the tasks, while also adding the image minification task discussed above. There is also <code>gulp deploy</code> task <em>(currently in development)</em> that is included when running the production task. This deploy task will automatically push a production-ready app to the host.</p>
<p><strong>Reminder:</strong> When running the production task, gulp will not fire up the express server and serve your index.html. This task is designed to be run before the <code>deploy</code> step that may copy the files from <code>/build</code> to a production web server.</p>
<h5 id="compression">Compression</h5>
<p>When running with <code>gulp prod</code>, a pre-compressed file is generated in addition to uncompressed file (.html.gz, .js.gz, css.gz). This is done to enable web servers serve compressed content without having to compress it on the fly. Pre-compression is handled by <code>gzip</code> task.</p>
<h5 id="tests">Tests</h5>
<p>A Gulp task also exists for running the test framework (discussed in detail below). Running <code>gulp test</code> will run any and all tests inside each <code>/app/components</code> directory and show the results (and any errors) in the terminal.</p>
<hr>
<h3 id="testing-still-heavily-under-development-">Testing <em>(still heavily under development)</em></h3>
<p>This application also includes a framework for unit and end-to-end (e2e) testing via <a href="http://karma-runner.github.io/">Karma</a> and <a href="http://jasmine.github.io/">Jasmine</a>. In order to test AngularJS modules, the <a href="https://docs.angularjs.org/api/ngMock/object/angular.mock">angular.mocks</a> module is used.</p>
<p><strong>NOTE: the test suite is currently in infancy and only includes a couple of examples.</strong></p>
<p>All of the tests can be run at once with the command <code>gulp test</code>. However, the tests are broken up into two main categories:</p>
<h5 id="end-to-end-e2e-tests">End-to-End (e2e) Tests</h5>
<p>e2e tests, as hinted at by the name, consist of tests that involve multiple modules or require interaction between modules, similar to integration tests. These tests are carried out using the Angular library <a href="https://github.com/angular/protractor">Protractor</a>, which also utilizes Jasmine. These tests ensure that the flow of the application is performing as designed from start to finish.</p>
<p>Two examples were included in the project&apos;s boilerplate, located in <code>/tests</code>:</p>
<ul>
<li><code>routes_spec.js</code>, which tests the functionality of the AngularJS routing</li>
<li><code>example_spec.js</code>, which tests the functionality of an example route, controller, and view</li>
</ul>
<p>More examples can be seen at the above link for Protractor.</p>
<p>All e2e tests are run with <code>gulp protractor</code>.</p>
<h5 id="unit-tests">Unit Tests</h5>
<p>Unit tests are used to test a single module (or &quot;unit&quot;) at a time in order to ensure that each module performs as intended individually. In AngularJS this could be thought of as a single controller, directive, filter, service, etc. <strong>Each component should be accompanied by a test, which should be stored alongside the component itself for easy maintenance.</strong></p>
<p>An example test in <code>/tests</code> is provided for the following types of AngularJS modules:</p>
<ul>
<li><code>unit/controllers/example_spec.js</code></li>
<li><code>unit/services/example_spec.js</code></li>
<li><code>unit/directives/example_spec.js</code></li>
<li><code>unit/constants_spec.js</code></li>
</ul>
<p>All unit tests are run with <code>gulp unit</code>. When running unit tests, code coverage is simultaneously calculated and output as an HTML file to the <code>/coverage</code> directory.</p>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.8)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
